<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="edge" />
    <title>用户运营系统</title>
    <link rel="shortcut icon" type="image/png" th:href="@{/img/favicon.ico}" />
    <link rel="stylesheet" data-th-href="@{/css/bootstrap.min.css}"/>
    <link rel="stylesheet" data-th-href="@{/css/materialdesignicons.min.css}"/>
    <link rel="stylesheet" data-th-href="@{/css/animate.css}"/>
    <!--时间选择插件-->
    <link rel="stylesheet" data-th-href="@{/plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.css}">
    <!--日期选择插件-->
    <link rel="stylesheet" data-th-href="@{/plugins/bootstrap-datepicker/bootstrap-datepicker3.css}">
    <link rel="stylesheet" data-th-href="@{/plugins/bootstrap-table/bootstrap-table.css}">
    <link href="https://cdn.bootcss.com/toastr.js/2.1.4/toastr.min.css" rel="stylesheet">
    <link rel="stylesheet" data-th-href="@{/plugins/confirm/jquery-confirm.min.css}">
    <link rel="stylesheet" data-th-href="@{/css/style.min.css}"/>
</head>

<body>
<!-- 公共组件 -->
<div data-th-include="common/common"></div>
<div class="lyear-layout-web">
    <div class="lyear-layout-container">
        <!-- 左侧导航 -->
        <div data-th-include="common/aside"></div>
        <!-- 头部信息 -->
        <div data-th-include="common/header"></div>
        <!-- 页面主要内容 -->
        <main class="lyear-layout-content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="card">
                            <div class="card-header">
                                <h4>新增运营目标</h4>
                            </div>
                            <div class="card-body">
                                <div class="m-t-md" id="step1">
                                    <form class="form-horizontal">
                                        <div class="form-group">
                                            <label class="col-md-3 control-label" for="gmvValue1">目标年份：</label>
                                            <div class="col-md-5">
                                                <select name="predictDate" id="predictDate" class="selectpicker form-control"></select>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="m-t-md" id="step2">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h5>历史数据</h5>
                                            <table id="historyDataTable" class="table table-bordered table-striped"></table>
                                        </div>
                                    </div>

                                    <div class="row mg-stop">
                                        <div class="col-md-12">
                                            <h5>预测数据</h5>
                                            <table id="predictDataTable" class="table table-hover table-bordered table-striped">
                                                <thead>
                                                <tr>
                                                    <th>预测方法</th><th>GMV预测值</th><th>比上年增长率</th>
                                                </tr>
                                                </thead>
                                                <tbody id="predictData">
                                                <tr><td>时间序列方法</td><td><span id="predictVal"></span></td><td><span id="predictRate"></span></td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h5>目标值</h5>
                                            <form class="form-horizontal" style="border:solid 1px #ccc;">
                                                <div class="form-group mg-stop">
                                                    <label class="col-md-3 control-label" for="gmvValue1">GMV目标值（元）：</label>
                                                    <div class="col-md-5 input-group">
                                                        <input class="form-control" type="text" id="gmvValue1" name="gmvValue1" value="2000"/>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-md-3 control-label" for="gmvRate1">目标相比上年增长率（%）：</label>
                                                    <div class="col-md-5 input-group">
                                                        <input class="form-control" type="text" id="gmvRate1" name="gmvRate1" value="21.25"/>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>

                                <div class="m-t-md" id="step3">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h5>目标值</h5>
                                            <form class="form-horizontal">
                                                <div class="form-group">
                                                    <label class="col-md-3 control-label" for="gmvValue2">GMV目标值（元）：</label>
                                                    <div class="col-md-5 input-group">
                                                        <input class="form-control" type="text" disabled id="gmvValue2" name="gmvValue2"/>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-md-3 control-label" for="gmvRate2">目标相比上年增长率（%）：</label>
                                                    <div class="col-md-5 input-group">
                                                        <input class="form-control" type="text" disabled id="gmvRate2" name="gmvRate2"/>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>

                                    <div class="row mg-stop">
                                        <div class="col-md-12">
                                            <h5>GMV月度权重指数</h5>
                                            <table class="table table-bordered">
                                                <tbody id="weightData"></tbody>
                                            </table>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-12">
                                            <div style="float: left;">
                                                <h5>GMV拆解表</h5>
                                            </div>
                                            <div class="text-right" style="margin-bottom: 10px;">
                                                <button class="btn btn-secondary" onclick="editPlanDetail()"><i class="mdi mdi-lead-pencil"></i>编辑</button>
                                                <button id="saveBtn" class="btn btn-primary" disabled onclick="updateDetail()"><i class="mdi mdi-link"></i>保存</button>
                                            </div>
                                            <table class="table table-bordered" id="planDetailData"></table>
                                        </div>
                                    </div>
                                    <div class="row" style="margin-top: 20px;display: none;" id="totalFooter">
                                        <div class="col-md-12">
                                            <p> 合计：<span id='totalGmv'></span>元，与年度目标总额相差<span id='totalDiffer'>0</span>元。</p>
                                        </div>
                                        <div class="col-md-12">
                                            <label class="lyear-radio radio-inline">
                                                <input type="radio" name="e"><span>保持我目前设置的各月的目标值不变，将差额更新到年度总额上</span>
                                            </label>
                                        </div>
                                        <div class="col-md-12">
                                            <label class="lyear-radio radio-inline">
                                                <input type="radio" name="e"><span>不变更年度总额，将与年度目标总额的差额根据权重指数分摊到各月</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div class="row mg-stop">
                                    <div class="col-md-12 text-right">
                                        <button id="prev" class="btn btn-primary" onclick="prev()">上一步</button>
                                        <button id="next" class="btn btn-primary" onclick="next()">下一步</button>
                                        <a id="finished" class="btn btn-default" onclick="reback()">返回</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
<!--时间选择插件-->
<script data-th-src="@{/plugins/bootstrap-datetimepicker/moment.min.js}"></script>
<script data-th-src="@{/plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.min.js}"></script>
<script data-th-src="@{/plugins/bootstrap-datetimepicker/locale/zh-cn.js}"></script>
<!--日期选择插件-->
<script data-th-src="@{/plugins/bootstrap-datepicker/bootstrap-datepicker.min.js}"></script>
<script data-th-src="@{/plugins/bootstrap-datepicker/locales/bootstrap-datepicker.zh-CN.min.js}"></script>
<script data-th-src="@{/plugins/bootstrap-table/bootstrap-table.js}"></script>
<script data-th-src="@{/plugins/bootstrap-table/bootstrap-table-zh-CN.min.js}"></script>
<script data-th-src="@{/plugins/confirm/jquery-confirm.min.js}"></script>
<script src="https://cdn.bootcss.com/toastr.js/2.1.4/toastr.min.js"></script>
<script data-th-src="@{/js/app/operate/gmvplan/add.js}"></script>
</body>
</html>
