<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="edge" />
    <title>用户运营系统</title>
    <link rel="shortcut icon" type="image/png" th:href="@{/img/favicon.ico}" />
    <link rel="stylesheet" data-th-href="@{/css/bootstrap.min.css}"/>
    <link rel="stylesheet" data-th-href="@{/css/materialdesignicons.min.css}"/>
    <link rel="stylesheet" data-th-href="@{/css/animate.css}"/>
    <link rel="stylesheet" data-th-href="@{/plugins/bootstrap-table/bootstrap-table.css}">
    <link rel="stylesheet" data-th-href="@{/css/style.min.css}"/>
</head>

<body>
<!-- 公共组件 -->
<div data-th-include="common/common"></div>
<div class="lyear-layout-web">
    <div class="lyear-layout-container">
        <!-- 左侧导航 -->
        <div data-th-include="common/aside"></div>
        <!-- 头部信息 -->
        <div data-th-include="common/header"></div>
        <!-- 页面主要内容 -->
        <main class="lyear-layout-content">
            <div class="container-fluid">
                <div class="card">
                    <div class="card-header">
                        <h4>诊断详情</h4>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div data-th-include="operate/diagnosis/progress"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
<script data-th-src="@{/plugins/bootstrap-table/bootstrap-table.js}"></script>
<script data-th-src="@{/plugins/bootstrap-table/bootstrap-table-zh-CN.min.js}"></script>
<script data-th-src="@{/js/app/operate/gmvplan/index.js}"></script>
<script>
    var diagId = "[[${id}]]";

    $.post("/diag/getNodes", {diagId: diagId}, function (r) {
        console.log(r);
        jmInit(r.data);
    });

    function jmInit(data) {
        var mind = {
            "meta":{
                "name":"gmv_mind",
                "version":"0.2"
            },
            "format":"node_array",
            "data": data
        };
        var options = {
            container:'jsmind_container',
            editable:false,
            theme:'greensea',
            mode: "side"
        };
        jsMind.show(options,mind);
    }
</script>
</body>
</html>