<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="edge"/>
    <title>用户成长系统</title>
    <link rel="shortcut icon" type="image/png" th:href="@{/images/favicon.ico}"/>
    <link rel="stylesheet" data-th-href="@{/css/bootstrap.min.css}"/>
    <link rel="stylesheet" data-th-href="@{/css/materialdesignicons.min.css}"/>
    <link rel="stylesheet" data-th-href="@{/css/animate.css}"/>
    <link rel="stylesheet" data-th-href="@{/plugins/confirm/jquery-confirm.min.css}">
    <link rel="stylesheet" data-th-href="@{/css/style.min.css}"/>
    <link rel="stylesheet" type="text/css"
          data-th-href="@{/plugins/bootstrap-year-calendar/css/bootstrap-year-calendar.min.css}">
    <link rel="stylesheet" data-th-href="@{/plugins/ztree/zTreeStyle.css}"/>

    <style>
        ul.ztree {margin-top: 0px;border: 1px solid #ccc;background: #ffffff;width:192px;height:260px;overflow-y:scroll;overflow-x:auto;}
    </style>
</head>

<body>
<!-- 公共组件 -->
<div data-th-include="common/common"></div>
<div class="lyear-layout-web">
    <div class="lyear-layout-container">
        <!-- 左侧导航 -->
        <div data-th-include="common/aside"></div>
        <!-- 头部信息 -->
        <div data-th-include="common/header"></div>
        <!-- 页面主要内容 -->
        <main class="lyear-layout-content" id="main">
            <div class="container-div ui-layout-center">
                <div class="row">
                    <div class="col-sm-12 search-collapse">
                        <div class="col-md-12">
                            <div class="row">
                                <h5 class="modal-title pull-left" style="margin-top: 20px;">用户成长洞察</h5>
                            </div>
                            <div class="row">
                                <hr class="hr"/>
                            </div>
                            <div class="row">
                                <form id="activity-form">
                                    <div class="select-list">
                                        <ul>
                                            <li>
                                                时间范围：
                                                <select id="dateRange" name="dateRange">
                                                    <option value="">请选择</option>
                                                    <option value="1">1个月</option>
                                                    <option value="3">3个月</option>
                                                    <option value="6">6个月</option>
                                                    <option value="12">12个月</option>
                                                </select>
                                            </li>
                                            <li class="pull-right">
                                                <a class="btn btn-primary btn-rounded btn-sm"
                                                   onclick="searchInsight()"><i class="fa fa-search"></i>&nbsp;搜索</a>
                                                <a class="btn btn-warning btn-rounded btn-sm" onclick="resetInsight()"><i
                                                        class="fa fa-refresh"></i>&nbsp;重置</a>
                                            </li>
                                        </ul>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 select-table table-striped">
                        <div class="row">
                            <div class="col-sm-12 table-striped">
                                <!--桑基图-->
                                <div class="row">
                                    <div class="col-md-12">
                                        <h5 class="modal-title pull-left" style="margin-top: 20px;">
                                            品牌用户成长旅程&nbsp;<a id="breakBtn" href="/sankey?dateRange=1" target="_blank" style="color: #48b0f7"><i class="fa fa-search-plus" aria-hidden="true"></i></a>
                                        </h5>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <hr class="hr" style="margin-top: 5px;margin-bottom: 5px;"/>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <table id="userCntTable" class="table table-striped"></table>
                                    </div>
                                </div>
                                <div class="row" style="margin-top: 12px;">
                                    <div class="col-md-12">
                                        <iframe src="/sankey?dateRange=1" width="100%" height="400px" frameborder="0" id="sankeyFrame"></iframe>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 select-table table-striped">
                        <div class="row">
                            <div class="col-md-12">
                                <h5 class="modal-title pull-left" style="margin-top: 20px;">成长旅程价值呈现</h5>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <hr class="hr" style="margin-top: 5px;margin-bottom: 5px;"/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 table-responsive">
                                <table id="spuValueTable" class="table table-striped text-nowrap"></table>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 select-table table-striped">
                        <div class="row">
                            <div class="col-md-12">
                                <h5 class="modal-title pull-left" style="margin-top: 20px;">选择旅程中重要SPU</h5>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <hr class="hr" style="margin-top: 5px;margin-bottom: 5px;"/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <form>
                                    <div class="select-list">
                                        <ul>
                                            <li>
                                                SPU名称：<input type="text" name="spuName">
                                            </li>
                                            <li>
                                                购买次序：
                                                <select name="purchOrder">
                                                    <option value="">请选择</option>
                                                    <option value="1">1</option>
                                                    <option value="2">2</option>
                                                    <option value="3">3</option>
                                                    <option value="4">4</option>
                                                    <option value="5">5</option>
                                                    <option value="6">6</option>
                                                    <option value="7">7</option>
                                                    <option value="8">8</option>
                                                </select>
                                            </li>
                                            <li class="pull-right">
                                                <a class="btn btn-primary btn-rounded btn-sm"
                                                   onclick="searchImportSpu()"><i class="fa fa-search"></i>&nbsp;搜索</a>
                                                <a class="btn btn-warning btn-rounded btn-sm" onclick="resetImportSpu()"><i
                                                        class="fa fa-refresh"></i>&nbsp;重置</a>
                                            </li>
                                        </ul>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <table class="table table-striped" id="importSpu"></table>
                            </div>
                        </div>
                    </div>

                    <!--SPU的用户成长模式-->
                    <div class="col-md-12 select-table table-striped">
                        <div class="row">
                            <div class="col-md-12">
                                <h5 class="modal-title pull-left" style="margin-top: 20px;">SPU的用户成长模式</h5>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <hr class="hr" style="margin-top: 5px;margin-bottom: 5px;"/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <form>
                                    <div class="select-list">
                                        <ul>
                                            <li>
                                                SPU/商品：<input type="text" id="spuProductName1"/>
                                                <div id="ztreeContent1" hidden style="z-index: 100;position: absolute;">
                                                    <ul id="ztree1" class="ztree"></ul>
                                                </div>
                                                <input type="hidden" id="spuProductType1"/>
                                                <input type="hidden" id="spuProductId1"/>
                                            </li>
                                            <li>
                                                周期（月）：
                                                <select name="period" id="period">
                                                    <option value="">请选择</option>
                                                    <option value="1">1</option>
                                                    <option value="2">2</option>
                                                    <option value="3">3</option>
                                                    <option value="4">4</option>
                                                    <option value="5">5</option>
                                                    <option value="6">6</option>
                                                    <option value="7">7</option>
                                                    <option value="8">8</option>
                                                    <option value="9">9</option>
                                                    <option value="10">10</option>
                                                    <option value="11">11</option>
                                                    <option value="12">12</option>
                                                </select>
                                            </li>
                                            <li class="pull-right">
                                                <a class="btn btn-primary btn-rounded btn-sm"
                                                   onclick="searchRetention()"><i class="fa fa-search"></i>&nbsp;搜索</a>
                                                <a class="btn btn-warning btn-rounded btn-sm" onclick="resetRetention()"><i
                                                        class="fa fa-refresh"></i>&nbsp;重置</a>
                                            </li>
                                        </ul>
                                    </div>
                                </form>
                            </div>
                            <div class="col-md-12" id="mask">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div style="opacity:0.6;width: 100%;height: 300px;line-height:300px!important;background-color: #ddd;color: #383838;" class="text-center center-block">
                                            请选择过滤条件！
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="charts" hidden>
                                <div class="col-md-12">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div id="chart1" style="width: 100%;height: 300px;"></div>
                                        </div>
                                        <div class="col-md-6">
                                            <div id="chart2" style="width: 100%;height: 300px;"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div id="chart3" style="width: 100%;height: 300px;"></div>
                                        </div>
                                        <div class="col-md-6">
                                            <div id="chart4" style="width: 100%;height: 300px;"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div id="chart5" style="width: 100%;height: 300px;"></div>
                                        </div>
                                        <div class="col-md-6">
                                            <div id="chart6" style="width: 100%;height: 300px;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--spu的用户成长洞察-->
                    <div class="col-md-12 select-table table-striped">
                        <div class="row">
                            <div class="col-md-12">
                                <h5 class="modal-title pull-left" style="margin-top: 20px;">SPU的用户成长洞察</h5>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <hr class="hr" style="margin-top: 5px;margin-bottom: 5px;"/>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <form>
                                    <div class="select-list">
                                        <ul>
                                            <li>
                                                SPU/商品：<input type="text" id="spuProductName2"/>
                                                <div id="ztreeContent2" hidden style="z-index: 100;position: absolute;">
                                                    <ul id="ztree2" class="ztree"></ul>
                                                </div>
                                                <input type="hidden" id="spuProductType2"/>
                                                <input type="hidden" id="spuProductId2"/>
                                            </li>
                                            <li>
                                                购买次序：
                                                <select name="purchOrder">
                                                    <option value="">请选择</option>
                                                    <option value="1">1</option>
                                                    <option value="2">2</option>
                                                    <option value="3">3</option>
                                                    <option value="4">4</option>
                                                    <option value="5">5</option>
                                                    <option value="6">6</option>
                                                    <option value="7">7</option>
                                                    <option value="8">8</option>
                                                </select>
                                            </li>
                                            <li class="pull-right">
                                                <a class="btn btn-primary btn-rounded btn-sm"
                                                   onclick="searchRetention()"><i class="fa fa-search"></i>&nbsp;搜索</a>
                                                <a class="btn btn-warning btn-rounded btn-sm" onclick="resetRetention()"><i
                                                        class="fa fa-refresh"></i>&nbsp;重置</a>
                                            </li>
                                        </ul>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
<!-- 日历插件 -->
<script data-th-src="@{/plugins/echarts/echarts.min.js}"></script>
<script data-th-src="@{/plugins/echarts/macarons.js}"></script>
<script type="text/javascript" data-th-src="@{/plugins/bootstrap-year-calendar/js/bootstrap-year-calendar.js}"></script>
<script type="text/javascript"
        data-th-src="@{/plugins/bootstrap-year-calendar/js/languages/bootstrap-year-calendar.zh-CN.js}"></script>
<script data-th-src="@{/js/common/bootstrap-notify.min.js}"></script>
<script data-th-src="@{/js/common/lightyear.js}"></script>
<script data-th-src="@{/plugins/confirm/jquery-confirm.min.js}"></script>
<script data-th-src="@{/plugins/ztree/jquery.ztree.core.js}"></script>
<script data-th-src="@{/plugins/ztree/jquery.ztree.excheck.js}"></script>
<script data-th-src="@{/js/app/operate/insight/insight.js}"></script>
<script data-th-src="@{/js/app/operate/insight/tree.js}"></script>
</body>
</html>
