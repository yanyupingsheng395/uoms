<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="edge"/>
    <meta name="referrer" content="never">
    <title>用户成长系统</title>
    <link rel="shortcut icon" type="image/png" th:href="@{/images/favicon.ico}"/>
    <link rel="stylesheet" data-th-href="@{/css/bootstrap.min.css}"/>
    <link rel="stylesheet" data-th-href="@{/css/materialdesignicons.min.css}"/>
    <link rel="stylesheet" data-th-href="@{/css/animate.css}"/>
    <link rel="stylesheet" data-th-href="@{/css/style.min.css}"/>
    <link rel="icon" data-th-href="@{/images/favicon.ico}" type="image/x-icon"/>

    <link rel="stylesheet" data-th-href="@{/plugins/bootstrap-select/bootstrap-select.min.css}">
    <!--时间选择插件-->
    <link rel="stylesheet" data-th-href="@{/plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.css}">
    <!--日期选择插件-->
    <link rel="stylesheet" data-th-href="@{/plugins/bootstrap-datepicker/bootstrap-datepicker3.css}">
    <!-- bootstrapTable -->
    <link rel="stylesheet" data-th-href="@{/plugins/bootstrap-table/bootstrap-table.min.css}">
    <!--表单验证-->
    <link rel="stylesheet"  data-th-href="@{/plugins/confirm/jquery-confirm.min.css}">
    <link rel="stylesheet" data-th-href="@{/css/common.css}"/>
    <link rel="stylesheet" data-th-href="@{/plugins/font-awesome-4.7.0/css/font-awesome.css}"/>
    <link rel="stylesheet" data-th-href="@{/plugins/steps/steps.css}"/>
    <script data-th-src="@{/js/common/jquery.min.js}"></script>
    <script data-th-src="@{/plugins/clipboard.min.js}"></script>
    <style type="text/css">
        .toolbar{border:1px solid #ccc;}.text{border:1px solid #ccc;height:400px;}.send{position:absolute;max-width:200px;width:auto;height:auto;background:#fff;border-radius:5px;margin-top:30px;margin-left:20px;padding:10px;font-size:12px;color:#000;word-wrap:break-word;}.send .arrow{position:absolute;top:9px;left:-16px;width:0;height:0;font-size:0;border:solid 8px;border-color:rgb(235,235,235) #fff rgb(235,235,235) rgb(235,235,235);}.msg-panel__context{background:#f5f5f5;}.cm-edit-content-con{background:#f5f5f5;}img{border-radius:5px;}.wx-audio-content{border-radius:5px;}.panel .panel-body{padding:0 !important;}.weui-media-box__title{font-size:15px !important;}.newtitle{font-size:15px !important;}.panel-heading{padding:0;}.steps{padding:0 !important;}.bubble{width:320px;}.demo{margin-bottom:20px;padding-left:50px;position:relative;}.triangle{position:absolute;top:50%;margin-top:-8px;left:42px;display:block;width:0;height:0;overflow:hidden;line-height:0;font-size:0;border-bottom:8px solid #FFF;border-top:8px solid #FFF;border-left:none;border-right:8px solid #409eff;}.demo .article{float:left;color:#FFF;display:inline-block;*display:inline;zoom:1;padding:5px 10px;border:1px solid #409eff;background:#eee;border-radius:5px;background-color:#4D90FE;background-image:-webkit-gradient(linear,left top,left bottom,from(#4D90FE),to(#4787ED));background-image:-webkit-linear-gradient(top,#4D90FE,#4787ED);background-image:-moz-linear-gradient(center top,#4D90FE,#4787ED);background-image:linear-gradient(top,#4D90FE,#4787ED);}.fr{padding-left:0px;padding-right:50px;}.fr .triangle{left:auto;right:42px;border-bottom:8px solid #FFF;border-top:8px solid #FFF;border-right:none;border-left:8px solid #3079ED;}.fr .article{float:right;}
    </style>
</head>
<body class="gray-bg">
<div class="lyear-layout-web">
    <div class="lyear-layout-container">
        <!-- 左侧导航 -->
        <div data-th-include="common/aside"></div>
        <!-- 头部信息 -->
        <div data-th-include="common/header"></div>
        <!-- 页面主要内容 -->
        <main class="lyear-layout-content">
            <div class="container-div ui-layout-center">
                <div class="row">
                    <div class="col-sm-12 search-collapse" style="padding-bottom: 0;">
                        <div class="row">
                            <div class="col-md-6 pull-left">
                                <h5 class="navbar-page-title" style="margin-left: 0;line-height:40px;">日常运营配置</h5>
                            </div>
                            <div class="col-md-3 pull-right">
                                <div id="configSteps"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 select-table table-striped">
                        <div class="row">
                            <div class="col-sm-12 table-striped">
                                <div id="step1">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="btn-group-sm" role="group">
                                                <a class="btn btn-secondary" onclick="nextStep(2)">
                                                    <i class="fa fa-arrow-right"></i> 下一步
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                    <table id="userGroupTable"
                                           class="table table-striped table-bordered text-nowrap m-t-10">
                                    </table>
                                </div>
                                <div id="step2" style="display: none;">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="btn-group-sm" role="group">
                                                <a class="btn btn-secondary" onclick="prevStep(1)">
                                                    <i class="fa fa-arrow-left"></i> 上一步
                                                </a>
                                                <a class="btn btn-secondary" onclick="nextStep(3)">
                                                    <i class="fa fa-arrow-right"></i> 下一步
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                    <ul class="nav nav-tabs" role="tablist" id="couponTab">
                                        <li class="active"><a href="#taoke" role="tab" data-toggle="tab">淘客券</a></li>
                                        <li><a href="#xiaochengxu" role="tab" data-toggle="tab">小程序券</a></li>
                                    </ul>

                                    <div class="tab-content">
                                        <div class="tab-pane fade active in" id="taoke">
                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <div class="btn-group-sm" role="group">
                                                        <a class="btn btn-info" onclick="getIntellectCoupon('0')">
                                                            <i class="fa fa-refresh"></i> 智能补贴
                                                        </a>
                                                        <a class="btn btn-success" onclick="addCoupon()">
                                                            <i class="fa fa-pencil"></i> 新建补贴
                                                        </a>
                                                        <a class="btn btn-primary" onclick="updateCoupon()">
                                                            <i class="fa fa-edit"></i> 编辑补贴
                                                        </a>
                                                        <a class="btn btn-danger" onclick="deleteCoupon()">
                                                            <i class="fa fa-close"></i> 删除补贴
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row m-t-10">
                                                <div class="col-sm-12 table-striped text-nowrap">
                                                    <table id="couponTable" class="table table-striped table-bordered"></table>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="tab-pane fade" id="xiaochengxu">
                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <div class="btn-group-sm" role="group">
                                                        <a class="btn btn-info" onclick="getIntellectCoupon('1')">
                                                            <i class="fa fa-refresh"></i> 智能补贴
                                                        </a>
<!--                                                        <a class="btn btn-success" onclick="addCoupon()">-->
<!--                                                            <i class="fa fa-plus"></i> 新建补贴-->
<!--                                                        </a>-->
<!--                                                        <a class="btn btn-primary" onclick="updateCoupon()">-->
<!--                                                            <i class="fa fa-edit"></i> 编辑补贴-->
<!--                                                        </a>-->
<!--                                                        <a class="btn btn-danger" onclick="deleteCoupon()">-->
<!--                                                            <i class="fa fa-close"></i> 删除补贴-->
<!--                                                        </a>-->
                                                        <a class="btn btn-success" onclick="$MB.n_success('本地小程序券和云端小程序券已同步完成！')">
                                                            <i class="fa fa-share-alt"></i> 同步补贴
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row m-t-10">
                                                <div class="col-sm-12 table-striped text-nowrap">
                                                    <table id="vmallCouponTable" class="table table-striped table-bordered"></table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div id="step3" style="display: none">
                                    <div th:include="operate/dailyconfig/dc_group_view"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
<!--测试-->
<div class="modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel3" id="send_modal" data-backdrop="static">
    <div class="modal-dialog" role="document" style="width: 50%;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">×</span></button>
                <h5 class="modal-title" id="myLargeModalLabel4">屏蔽测试</h5>
            </div>
            <div class="modal-body">
                <form class="form-horizontal">
                    <div class="form-group mg-stop">
                        <input type="hidden" name="testSmsCode" id="testSmsCode"/>
                        <label class="col-md-4 control-label" for="testSmsContent">文案内容：</label>
                        <div class="col-md-6 input-group">
                            <textarea class="form-control" id="testSmsContent" name="example-textarea-input"
                                      rows="6" readonly></textarea>
                            <span class="wordwrap h6" style="color: #7c7c7c">*上述内容中系统填充变量并非真实，而是选择变量字符最大值示例进行填充</span>
                        </div>
                    </div>
                    <div class="form-group mg-stop">
                        <label class="col-md-4 control-label">测试建议：</label>
                        <div class="col-md-6 input-group">
                            <h5 style="color: #7c7c7c;">建议不同的手机号体现不同的机型与操作系统，根据短信的收取情况判断是否有屏蔽，以便于调整文案内容；</h5>
                        </div>
                    </div>
                    <div class="form-group mg-stop">
                        <label class="col-md-3 col-md-offset-1 control-label">手机号1：</label>
                        <div class="col-md-6 input-group">
                            <input class="form-control" type="text" name="phoneNum"/>
                        </div>
                    </div>
                    <div class="form-group mg-stop">
                        <label class="col-md-4 control-label">手机号2：</label>
                        <div class="col-md-6 input-group">
                            <input class="form-control" type="text" name="phoneNum"/>
                        </div>
                    </div>
                    <div class="form-group mg-stop">
                        <label class="col-md-4 control-label">手机号3：</label>
                        <div class="col-md-6 input-group">
                            <input class="form-control" type="text" name="phoneNum"/>
                        </div>
                    </div>
                    <div class="form-group mg-stop">
                        <label class="col-md-4 control-label">手机号4：</label>
                        <div class="col-md-6 input-group">
                            <input class="form-control" type="text" name="phoneNum"/>
                        </div>
                    </div>
                    <div class="form-group mg-stop">
                        <label class="col-md-4 control-label">手机号5：</label>
                        <div class="col-md-6 input-group">
                            <input class="form-control" type="text" name="phoneNum"/>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary btn-sm" onclick="sendMessage()">测试推送</button>
                <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>
<input type="hidden" id="currentGroupId">

<div th:include="operate/dailyconfig/dc_smstemplate"></div>
<!-- 企业微信消息 -->
<div th:include="operate/dailyconfig/dc_wechat_msg"></div>
<div th:include="operate/dailyconfig/dc_usergroup"></div>
<div th:include="operate/dailyconfig/dc_coupon"></div>
<script>
    let couponNameLen = [[${couponNameLen}]];
    let smsLengthLimit = [[${smsLengthLimit}]];
    let shortUrlLen = [[${shortUrlLen}]];
    let prodNameLen = [[${prodNameLen}]];
</script>
<script data-th-src="@{/js/app/common.js}"></script>
<script data-th-src="@{/js/common/bootstrap.min.js}"></script>
<script data-th-src="@{/js/common/perfect-scrollbar.min.js}"></script>
<script data-th-src="@{/plugins/bootstrap-select/bootstrap-select.min.js}"></script>
<script data-th-src="@{/plugins/bootstrap-select/defaults-zh_CN.min.js}"></script>
<script data-th-src="@{/js/common/bootstrap-notify.min.js}"></script>
<!--时间选择插件-->
<script data-th-src="@{/plugins/bootstrap-datetimepicker/moment.min.js}"></script>
<script data-th-src="@{/plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.min.js}"></script>
<script data-th-src="@{/plugins/bootstrap-datetimepicker/locale/zh-cn.js}"></script>
<!--日期选择插件-->
<script data-th-src="@{/plugins/bootstrap-datepicker/bootstrap-datepicker.min.js}"></script>
<script data-th-src="@{/plugins/bootstrap-datepicker/locales/bootstrap-datepicker.zh-CN.min.js}"></script>
<!-- bootstrapTable -->
<script data-th-src="@{/plugins/bootstrap-table/bootstrap-table.min.js}"></script>
<script data-th-src="@{/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.js}"></script>
<script data-th-src="@{/plugins/jquery-validate/jquery.validate.min.js}"></script>
<script data-th-src="@{/plugins/jquery-validate/additional-methods.min.js}"></script>
<script data-th-src="@{/plugins/jquery-validate/messages_zh.min.js}"></script>
<script data-th-src="@{/js/common/main.min.js}"></script>
<script data-th-src="@{/js/common/lightyear.js}"></script>
<script data-th-src="@{/plugins/confirm/jquery-confirm.min.js}"></script>
<script data-th-src="@{/js/app/init.js}"></script>
<script data-th-src="@{/plugins/steps/steps.js}"></script>
<script data-th-src="@{/js/app/operate/dailyconfig/dc_smstemplate.js}"></script>
<script data-th-src="@{/js/app/operate/dailyconfig/dc_coupon.js}"></script>
<script data-th-src="@{/js/app/operate/dailyconfig/dc_qyWxMsg.js}"></script>
<script data-th-src="@{/js/app/operate/dailyconfig/config.js}"></script>
<script>
    var clipboard1 = new ClipboardJS('.copy_btn', {
        container: document.getElementById('add_modal')
    });
    new ClipboardJS('.copy_btn', {
        container: document.getElementById('wxMsgAddModal')
    });
    clipboard1.on('success', function(e) {
        $MB.n_success("成功复制到粘贴板！");
    });
</script>
</body>
</html>